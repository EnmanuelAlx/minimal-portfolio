import{n as b}from"./router.DKcY2uv6.js";function i(l,t){const e=document.createElement(l);return t&&typeof t=="string"&&t!==""&&(e.textContent=t),t&&typeof t=="object"&&Object.keys(t).forEach(s=>{e.setAttribute(s,t[s])}),e}function y(l,t,e){l.addEventListener(t,e)}function C(l){const t=l.match(/\w+$/)?.[0]??"";return t===""||t.length>1?"":t.toUpperCase()}const g=["Control","Shift","Alt","Meta"],v=["Control+T","Control+Shift+T","Control+W","Control+Shift+W","Control+N","Control+Shift+N","Control+Tab","Control+Shift+Tab","Meta+T","Meta+Shift+T","Meta+W","Meta+Shift+W","Meta+N","Meta+Shift+N","Meta+Tab","Meta+Shift+Tab"];function E(l){const t=l.match(/\w+/g)??[];if(t.length===0)return!1;const e=t.map(s=>s.toUpperCase()==="CTRL"?"Control":s.toUpperCase()==="CMD"?"Meta":s[0].toUpperCase()+s.slice(1).toLowerCase()).join("+");return!v.includes(e)&&e.split("+").slice(0,-1).every(s=>g.includes(s))}class w{instance;#o=null;#t=null;#s=[];currentIndex=0;#i="Escape";#r;#n="K";#e="Search command";#h="No commands found";#a="black";#u=new MutationObserver(this.#f.bind(this));constructor({closeKey:t,placeholder:e,emptyMessage:s,activationLetter:n}={}){if(document.getElementById("hotkeypad")==null)throw new Error("HotKeyPad instance not found in the DOM");return this.instance=document.getElementById("hotkeypad"),this.#r=navigator.userAgent.includes("Macintosh")?"Cmd":"Ctrl",t&&t!==""&&(this.#i=t),e&&e!==""&&(this.#e=e),s&&s!==""&&(this.#h=s),n&&n!==""&&(this.#n=n),this.#y(),this.#p(),this}#p(){y(document,"keydown",t=>{const e=`Key${this.#n.toUpperCase()}`;t.code===e&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),this.#C?this.close():this.open()),t.key.toLowerCase()===this.#i.toLowerCase()&&this.close()}),this.#u.observe(this.instance,{attributes:!0,attributeFilter:["class"],childList:!1,characterData:!1}),this.#w(),this.#A(),this.#L(),this.#I()}#y(){this.instance.hasAttribute("data-placeholder")&&this.instance.getAttribute("data-placeholder")!==""&&(this.#e=this.instance.getAttribute("data-placeholder")),this.instance.hasAttribute("data-activation-letter")&&this.instance.getAttribute("data-activation-letter")!==""&&(this.#n=this.instance.getAttribute("data-activation-letter").toUpperCase()),this.instance.hasAttribute("data-close-key")&&this.instance.getAttribute("data-close-key")!==""&&(this.#i=this.instance.getAttribute("data-close-key").toUpperCase())}#f(t){const{attributeName:e,target:s}=t[0];e==="class"&&(s.classList.contains("dark")?this.#a="white":this.#a="black",this.#d())}#m(){y(this.instance,"keydown",t=>{(t.metaKey||t.ctrlKey)&&this.#s.find(({hotkey:e,handler:s})=>{const a=`Key${C(e)}`;return t.code===a&&(t.preventDefault(),s!=null&&setTimeout(()=>s(),200),this.close()),!1})}),y(this.#t,"click",t=>{const e=t.target;e.tagName==="LI"&&this.#c(e),e.parentElement?.tagName==="LI"&&this.#c(e.parentElement)}),y(this.#t,"mouseover",t=>{const e=t.target;e.tagName==="LI"&&(this.#l.forEach(s=>s.removeAttribute("data-active")),e.setAttribute("data-active",""))}),y(this.#t,"keydown",t=>{const e=this.#l;this.currentIndex=Array.from(e).findIndex(n=>n.hasAttribute("data-active")),this.currentIndex=this.currentIndex===-1?0:this.currentIndex;let s=0;t.key==="Enter"&&(t.preventDefault(),this.#c(e[this.currentIndex]),e[this.currentIndex].removeAttribute("data-active"),this.currentIndex=0),t.key==="ArrowUp"&&(t.preventDefault(),s=this.currentIndex-1<0?e.length-1:this.currentIndex-1),t.key==="ArrowDown"&&(t.preventDefault(),s=this.currentIndex+1>e.length-1?0:this.currentIndex+1),t.key==="Tab"&&(t.preventDefault(),s=this.currentIndex+1>e.length-1?0:this.currentIndex+1),e[this.currentIndex].removeAttribute("data-active"),e[s].setAttribute("data-active","")}),y(this.#t,"input",t=>{const s=t.target.value.toLowerCase(),n=this.#t.querySelectorAll("[data-section]"),a=this.#t.querySelector("[data-empty]");n.forEach(r=>{const h=r.querySelector("ul");h.querySelectorAll("li").forEach(c=>{c.querySelector("p").innerText.toLowerCase().includes(s)?c.style.display="flex":c.style.display="none"}),h.querySelectorAll("li[style='display: flex;']").length===0?r.style.display="none":r.style.display="block"}),this.#t.querySelectorAll("[data-section][style='display: block;']").length===0?a.style.display="flex":a.style.display="none"})}#c(t){this.#s.find(({hotkey:e,handler:s})=>(t.getAttribute("data-hotkey")===e&&(s!=null&&setTimeout(()=>s(),200),this.close()),!1))}#k(t){if(t.length===0)throw new Error("The commands array cannot be empty");return t.forEach(e=>{if(e.id===""||e.title===""||e.hotkey===""||e.handler==null)throw new Error("The command object is not valid. It should contain an id, title, hotkey and handler");if(!E(e.hotkey))throw new Error("The hotkey is not valid. It should only contain CTRL, CMD, ALT, SHIFT and a letter. Also it cannot contain browser or system reserved hotkeys such as CTRL+T, CTRL+N, CTRL+W, etc.");if(e.icon!=null&&typeof e.icon!="string")throw new Error("The icon should be a string");if((e.hotkey.match(/\w+/g)??[]).length>2)throw new Error("The hotkey only supports 2 keys maximum")}),t}#b(t){const e=document.querySelector("#hotkeypad-footer");if(e==null)return!1;const s=e.content.cloneNode(!0);return Array.from(s.children).forEach(a=>t.appendChild(a)),!0}open(){window.dispatchEvent(new CustomEvent("hotkeypad:open")),this.instance.style.opacity="1",this.instance.style.visibility="visible",this.instance.style.pointerEvents="auto",setTimeout(()=>this.#t.querySelector("input").focus(),200)}close(){window.dispatchEvent(new CustomEvent("hotkeypad:close")),this.instance.style.opacity="0",this.instance.style.visibility="hidden",this.instance.style.pointerEvents="none",this.#t.querySelector("input").value="",this.#t.removeEventListener("keydown",()=>{}),this.#t.removeEventListener("mouseover",()=>{}),this.#t.removeEventListener("input",()=>{})}setCommands(t){this.#s=this.#k(t),this.#d(),this.#m()}get#C(){return this.instance.style.visibility==="visible"}get activationKey(){return this.#r}get#g(){const t=new Map;return this.#s.forEach(e=>{const s=typeof e.section!="string"||e.section===""?"Unlisted":e.section,{section:n,...a}=e,o=t.get(s);o?o.push(a):t.set(s,[a])}),Array.from(t)}get#l(){return this.#t.querySelectorAll("li")}get emptyMessage(){const t=i("div",this.#h);return t.setAttribute("data-empty",""),t}#v(t){return`https://cdn.simpleicons.org/${t}/${this.#a}`}#E(t){return/<svg/.test(t)||/<img/.test(t)||/<i/.test(t)||t===""}#w(){this.#o=i("div",{"data-backdrop":"","aria-hidden":"true"}),y(this.#o,"click",()=>this.close()),this.instance.appendChild(this.#o)}#A(){this.#t=i("div",{"data-container":""}),this.instance.appendChild(this.#t)}#L(){const t=i("header"),e=i("input",{type:"text",name:this.#e.toLocaleLowerCase(),placeholder:this.#e,"aria-label":this.#e,autocomplete:"off",spellcheck:"false"});t.appendChild(e),this.#t.appendChild(t)}#I(){const t=i("footer");if(!this.#b(t)){const e=i("kbd","↩"),s=i("kbd","↑"),n=i("kbd","↓"),a=i("kbd",this.#i),o=i("kbd",`${this.#r} + ${this.#n}`),r=i("p"," to select"),h=i("p"," to navigate"),u=i("p"," to close");r.prepend(e),h.prepend(s,n),u.prepend(o,a),t.append(r,h,u)}this.#t.appendChild(t)}#S(){const t=i("div");t.setAttribute("data-sections",""),this.#g.forEach(([e,s])=>{const n=i("div");if(n.setAttribute("data-section",e.toLowerCase()),e!=="Unlisted"){const o=i("h4",e);o.setAttribute("id",`section-${e.toLowerCase()}`),n.setAttribute("aria-labelledby",`section-${e.toLowerCase()}`),n.appendChild(o)}const a=i("ul");s.forEach(({title:o,icon:r,hotkey:h})=>{const u=h.split("+").map(d=>d.trim());r==null&&(r="");const f=this.#E(r)?r:`<img src="${this.#v(r)}" alt="${o}" />`,c=i("li");if(c.setAttribute("data-hotkey",h.toLowerCase()),f!==""){const d=i("span");d.innerHTML=f,c.appendChild(d)}const p=i("p");p.append(o);const m=i("div");u.forEach(d=>{const k=i("span",d);m.appendChild(k)}),c.appendChild(p),c.appendChild(m),a.appendChild(c)}),n.appendChild(a),t.appendChild(n)}),t.appendChild(this.emptyMessage),this.#t.insertBefore(t,this.#t.lastChild)}#d(){const t=this.#t.querySelector("[data-sections]");t&&t.remove(),this.#S(),this.#l[0].setAttribute("data-active","")}}document.addEventListener("astro:page-load",()=>{const l=new w;document.querySelector(".commands")?.addEventListener("click",()=>{var o=new KeyboardEvent("keydown",{key:"k",code:"KeyK",keyCode:75,which:75,ctrlKey:!0,altKey:!1,shiftKey:!1,metaKey:!1});document.dispatchEvent(o)});const e=l.instance.getAttribute("data-info")??"[]",s=JSON.parse(e),n=(o,r)=>{if(o){if(r==="_self"){b(o);return}window.open(o,r)}},a=s.map(({url:o,title:r,icon:h,hotkey:u,section:f,id:c})=>{const p={id:c,title:r,icon:h,hotkey:u,section:f},m=c==="language"?"_self":"_blank";return c==="toggle-theme"?{...p,handler:()=>{const d=document.documentElement;d.classList.toggle("dark");const k=d.classList.contains("dark");localStorage.setItem("theme",k?"dark":"light")}}:c==="print"?{...p,handler:()=>{document.documentElement.classList.remove("dark"),window.scrollTo(0,0),window.print()}}:{...p,handler:()=>n(o,m)}});l.setCommands(a)});
